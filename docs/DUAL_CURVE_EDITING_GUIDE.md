# 双曲线实时编辑功能使用指南

## 功能概述

双曲线实时编辑功能是推力曲线调试器的一项重要增强，它允许用户同时查看和编辑两个电机的推力曲线，并能够在它们之间快速切换。这项功能特别适合于需要比较和调整多个电机参数的场景，显著提高了调试效率。

## 主要特性

1. **实时拖拽刷新**：拖拽曲线上的点时，参数值会实时更新，响应速度更快
2. **双曲线同时显示**：两个电机的曲线可以同时显示在同一个图表上，便于比较
3. **快速切换编辑**：可以通过一个按钮快速切换当前正在编辑的电机
4. **视觉区分**：使用不同的颜色和线型清晰区分两条曲线
5. **实时参数更新**：修改任一电机的参数时，曲线会立即更新

## 使用方法

### 启用双曲线视图

1. 点击界面顶部的"双曲线视图"按钮启用双曲线模式
2. 系统会自动选择一个不同于当前电机的电机作为比较对象
3. 您也可以从下拉菜单中手动选择要比较的电机

### 切换编辑电机

1. 启用双曲线视图后，"切换调整电机"按钮会被激活
2. 按钮上会显示当前正在编辑的电机名称
3. 点击此按钮可以在主电机和比较电机之间切换
4. 当前正在编辑的电机参数组会以浅蓝色背景高亮显示

### 编辑曲线参数

有两种方式可以编辑曲线参数：

1. **通过输入框**：
    - 直接在参数输入框中修改数值
    - 曲线会随着输入实时更新，无需按回车键

2. **通过拖拽点**：
    - 在图表上直接拖动点来调整参数
    - 主曲线使用红色点，比较曲线使用蓝色点
    - 拖动时参数值会实时更新到对应的输入框中

### 视觉区分

为了清晰区分两条曲线，系统使用了以下视觉元素：

- **主曲线**：实线，红色点
- **比较曲线**：虚线，蓝色点
- **当前编辑的参数组**：浅蓝色背景高亮
- **图例**：自动显示两条曲线的名称和类型

## 性能优化

为了提高用户体验，我们对性能进行了以下优化：

1. **更快的刷新率**：将刷新间隔从10ms降低到5ms，使UI更加响应
2. **优化的拖拽处理**：改进了拖拽点的处理逻辑，使操作更加流畅
3. **实时更新机制**：使用更高效的更新机制，减少不必要的重绘

## 测试功能

为了验证双曲线编辑功能的性能和正确性，我们提供了一个自动化测试脚本：

1. 运行 `run_performance_test.bat` 启动测试
2. 测试会自动执行以下步骤：
    - 启用双曲线视图
    - 选择比较电机
    - 切换编辑电机
    - 修改比较电机参数
    - 切换回主电机
    - 修改主电机参数

通过观察测试过程中的UI响应速度和参数更新情况，可以验证功能是否正常工作。

## 注意事项

1. 双曲线模式下，两个电机的参数是完全独立的，修改一个不会影响另一个
2. 切换编辑电机只会改变当前正在编辑的电机，不会影响曲线的显示
3. 在双曲线模式下，二分查找辅助功能仍然可用，但只适用于当前正在编辑的电机