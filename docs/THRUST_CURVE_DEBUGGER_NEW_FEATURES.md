# 推力曲线调试器新功能说明

## 1. 实时参数更新

推力曲线调试器现在支持实时参数更新，使调整曲线参数更加直观和高效：

- **实时输入反馈**：在输入框中输入参数时，曲线会实时更新，无需点击其他区域或按回车键
- **拖拽点实时更新**：拖拽曲线上的点时，参数值会实时更新到输入框中
- **输入验证**：完成编辑后会进行验证，确保参数有效

这种实时反馈机制使调整推力曲线变得更加直观，可以立即看到参数变化对曲线形状的影响。

## 2. 双曲线对比视图与同时编辑

新增的双曲线对比功能允许同时查看、比较和编辑两个不同电机的推力曲线：

- **切换按钮**：通过界面顶部的"双曲线视图"按钮启用/禁用此功能
- **电机选择**：可以选择任意一个电机作为比较对象
- **同时编辑**：可以同时编辑主电机和比较电机的参数，无需切换
- **视觉区分**：
    - 主曲线（当前电机）使用实线和红色点显示
    - 比较曲线使用虚线和蓝色点显示
    - 两条曲线的点都可以通过拖拽调整
    - 图例会显示两条曲线的标识

此功能特别适合用于：

- 比较不同电机的推力曲线差异
- 同时调整多个电机曲线使其保持一致
- 复制成功的曲线参数到其他电机
- 微调多个电机之间的差异

## 3. 优化的界面布局

界面布局经过全面优化，提供更好的用户体验：

- **可调整大小的面板**：使用分割器（Splitter）使面板大小可以根据需要调整
- **更合理的参数分组**：
    - 负向参数和正向参数分别分组
    - 参数标签更加直观（如"推力终点"、"PWM中点"等）
- **响应式布局**：界面元素会随窗口大小调整而自适应
- **中间部分可调整**：推力曲线和推力状态示意图之间的比例可以调整

## 4. 使用说明

### 实时参数调整

1. 直接在参数输入框中输入数值，曲线会随着输入实时更新
2. 也可以直接在图上拖动点来调整参数，对应的输入框会实时更新数值

### 双曲线对比与同时编辑

1. 点击顶部的"双曲线视图"按钮启用双曲线模式
2. 在比较电机参数面板中选择要比较的电机
3. 可以通过以下方式同时编辑两个电机的参数：
    - 直接在各自的参数输入框中修改数值
    - 在图表中拖动红色点（主电机）或蓝色点（比较电机）
    - 所有修改都会实时反映在曲线和参数输入框中
4. 两个电机的参数完全独立，可以同时调整而不会相互影响
5. 再次点击"双曲线视图"按钮可以返回单曲线模式

### 界面调整

- 拖动主分割器可以调整左右两个面板的宽度比例
- 拖动中间分割器可以调整推力曲线和推力状态示意图的宽度比例
- 窗口可以自由调整大小，界面元素会相应调整

## 5. 技术说明

新功能的实现涉及以下技术改进：

- 使用 Qt 的 `textChanged` 信号替代 `editingFinished` 实现实时更新
- 使用 `QSplitter` 组件实现可调整大小的面板
- 扩展 `DraggablePointPlot` 类以支持双曲线绘制和同时编辑
- 优化布局结构，使用嵌套布局提高界面灵活性
- 增加 `update_interval` 属性，降低刷新延迟，提高UI响应速度
- 改进 `on_motion` 方法，支持同时处理主曲线和比较曲线的点拖拽
- 添加 `_update_comparison_lines` 方法，实现比较曲线的实时更新

这些改进不仅提升了用户体验，也为未来功能扩展提供了更灵活的基础。双曲线同时编辑功能特别适合需要微调多个电机参数的场景，显著提高了调试效率。